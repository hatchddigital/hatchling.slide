/*! slide - v0.2.9 - 2014-09-24
 * http://hatchd.com.au/
 * Copyright (c) 2014 Hatchd Digital <hello@hatchd.com.au>; 
 */(function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.Slide=t(window.jQuery)})(function(t){"use strict";Date.now||function(){return(new Date).getTime()},t.fn.reverse=[].reverse;var e=function e(e,i){return this.options=t.extend({loop:!1,onChange:null,onInit:null,grouping:1,breakpoints:null},i),this.onChange=this.options.onChange,this.onInit=this.options.onInit,this._element=t(e),this._items=this._element.find(".slide-item"),this._translate=0,this._current=t(this._items.filter(".state-current")),this._current.length&&this._current_length==this.options.grouping||(this._current=this._items.slice(0,this.options.grouping),this._current.addClass("state-current")),this.setCurrent=this.supportsTransform()?this._setCurrent:this._setCurrentSansTransition,null!==this.options.breakpoints?(this._bindBreakpoints(this.options.breakpoints.sort(function(t,e){return t.width>e.width})),t(window).trigger("resize")):this.setGrouping(this.options.grouping),this._bind(),this._draw(),this._element.trigger("init",this._current),this};return e.prototype._draw=function(){return this._updateControls(),this._element.find(".slide-items").css("width",""+100*(this._items.length/this._grouping)+"%"),this._items.css("width",""+100/this._items.length+"%"),this},e.prototype._nextSlide=function(t){return this._grouping>0?t.first().nextAll().andSelf().slice(this._grouping,2*this._grouping):t.next()},e.prototype._prevSlide=function(t){return this._grouping>0?t.first().prevAll().slice(0,this._grouping).reverse():t.prev()},e.prototype._bindBreakpoints=function(e){var i=this;t(window).on("resize",function(){for(var t,n=i._windowWidth(),s=e.length-1;s>=0;s--)if(t=e[s],n>t.width)return i.setGrouping(t.grouping),i.setCurrent(i._current),void 0;i.setGrouping(i.options.grouping),i.setCurrent(i._current)})},e.prototype._windowWidth=function(){if(null===window.orientation)return t(window).width();switch(window.orientation){case-90:case 90:return t(window).width();default:return t(window).height()}},e.prototype.setGrouping=function(t){this._grouping=t,this._draw()},e.prototype.getGrouping=function(){return this._grouping},e.prototype.supportsTransform=function(){var t,e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];for(t=0;e.length>t;t++)if(void 0!==document.createElement("div").style[e[t]])return!0;return!1},e.prototype._bind=function(){var e=this;return this._element.find(".slide-next").on("click",function(t){e.next(),t.preventDefault()}),this._element.find(".slide-prev").on("click",function(t){e.prev(),t.preventDefault()}),this._element.find(".slide-select").on("click",function(i){var n=t(this),s=e._element.find(n.attr("href"));e.setCurrent(s),i.preventDefault()}),this._element.on("change",function(t,i,n){"function"==typeof e.onChange&&e.onChange.call(this,t,i,n)}),this._element.on("init",function(t,i){"function"==typeof e.onInit&&e.onInit.call(this,t,i),e.first()}),this},e.prototype.prev=function(){this.hasLess()?this.setCurrent(this._prevSlide(this._current)):this.options.loop===!0&&this.setCurrent(this._items.last())},e.prototype.next=function(){this.hasMore()?this.setCurrent(this._nextSlide(this._current)):this.options.loop===!0&&this.setCurrent(this._items.first())},e.prototype.first=function(){this.setCurrent(this._items.first())},e.prototype.nth=function(t){t>=0&&this._items.length>t&&this.setCurrent(this._items[t])},e.prototype._setCurrentSansTransition=function(e){for(var i=t(e),n=this._current,s=this._items.index(i.first()),r=s+(this._grouping-1),o=0;this._items.length>o;++o)s>o?t(this._items[o]).hide().removeClass("state-current"):o>=s&&r>=o?t(this._items[o]).show().addClass("state-current"):t(this._items[o]).hide().removeClass("state-current");this._current=i,this._element.trigger("change",[this._current,n]),this._updateControls()},e.prototype._setCurrent=function(e){var i,n,s=t(e),r=this._current,o=this._items.index(s.first()),h=this._items.index(r.first());if(-1!==o){o>=h?(n=-100*(this._items.length-this._grouping),i=this._translate-100*(o-h),this._translate=Math.max(n,i)):(i=this._translate+100*(h-o),this._translate=Math.min(0,i)),this._items.css("transform","translateX("+(""+this._translate)+"%)"),r.removeClass("state-current"),this._current=s.addClass("state-current"),this._element.trigger("change",[this._current,r]);var u=t(this._current).find("img"),a=u.attr("data-src");if(a&&a!=u.attr("src")){var l=new window.Image;l.src=a,l.complete||l.width+l.height>0?u.attr("src",a):l.onload=function(){u.attr("src",a)}}this._updateControls()}},e.prototype.hasMore=function(){return this._items.index(this._current)+this._grouping<this._items.length},e.prototype.hasLess=function(){return this._items.index(this._current)>0},e.prototype._updateControls=function(){var t=this._element.find(".slide-prev"),e=this._element.find(".slide-next"),i=this._element.find(".slide-bullets .slide-bullet");i.length&&(i.removeClass("state--active"),i.eq(this._items.index(this._current)).addClass("state--active")),this.options.loop||(this.hasLess()?t.removeClass("state-inactive"):t.addClass("state-inactive"),this.hasMore()?e.removeClass("state-inactive"):e.addClass("state-inactive"))},t.fn.slide=function(i,n){return i=i||{},this.each(function(){var s=t(this).data("slide");(!s||n)&&(s=new e(this,i),t(this).data("slide",s))})},e});