/*! slide - v0.2.5 - 2017-05-16
 * http://hatchd.com.au/
 * Copyright (c) 2017 Hatchd Digital <hello@hatchd.com.au>; 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.Slide=t(window.jQuery)}(function(t){"use strict";Date.now;t.fn.reverse=[].reverse;var i=function(i,e){return this.options=t.extend({loop:!1,onChange:null,onInit:null,grouping:1,breakpoints:null,pagination:!1},e),this.onChange=this.options.onChange,this.onInit=this.options.onInit,this._element=t(i),this._items=this._element.find(".slide-item"),this._translate=0,this._current=t(this._items.filter(".state-current")),this._current.length&&this._current_length==this.options.grouping||(this._current=this._items.slice(0,this.options.grouping),this._current.addClass("state-current")),this.setCurrent=this.supportsTransform()?this._setCurrent:this._setCurrentSansTransition,null!==this.options.breakpoints?(this._bindBreakpoints(this.options.breakpoints.sort(function(t,i){return t.width>i.width})),t(window).trigger("resize")):(this.setGrouping(this.options.grouping),this.options.pagination&&this._drawPagination()),this._bind(),this._draw(),this._element.trigger("init",this._current),this};return i.prototype._draw=function(){return this._updateControls(),this._element.find(".slide-items").css("width",(this._items.length/this._grouping*100).toString()+"%"),this._items.css("width",(100/this._items.length).toString()+"%"),this},i.prototype._nextSlide=function(t){return this._grouping>0?t.first().nextAll().andSelf().slice(this._grouping,2*this._grouping):t.next()},i.prototype._prevSlide=function(t){return this._grouping>0?t.first().prevAll().slice(0,this._grouping).reverse():t.prev()},i.prototype._bindBreakpoints=function(i){var e=this;t(window).on("resize",function(){for(var n,s=void 0!==window.orientation&&180===Math.abs(window.orientation)?t(window).height():t(window).width(),r=i.length-1;r>=0;r--)if((n=i[r]).width<s)return e.setGrouping(n.grouping),e.options.pagination&&e._drawPagination(),void e.setCurrent(e._current);e.setGrouping(e.options.grouping),e.options.pagination&&e._drawPagination(),e.setCurrent(e._current)})},i.prototype.setGrouping=function(t){this._grouping=t,this._draw()},i.prototype.getGrouping=function(){return this._grouping},i.prototype.supportsTransform=function(){var t,i=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];for(t=0;t<i.length;t++)if(void 0!==document.createElement("div").style[i[t]])return!0;return!1},i.prototype._bind=function(){var i=this;return this._element.find(".slide-next").on("click",function(t){i.next(),t.preventDefault()}),this._element.find(".slide-prev").on("click",function(t){i.prev(),t.preventDefault()}),this._element.find(".slide-select").on("click",function(e){var n=t(this),s=i._element.find(n.attr("href"));i.setCurrent(s),e.preventDefault()}),this._element.on("change",function(t,e,n){"function"==typeof i.onChange&&i.onChange.call(this,t,e,n)}),this._element.on("init",function(t,e){"function"==typeof i.onInit&&i.onInit.call(this,t,e)}),this},i.prototype.prev=function(){this.hasLess()?this.setCurrent(this._prevSlide(this._current)):!0===this.options.loop&&this.setCurrent(this._items.last())},i.prototype.next=function(){this.hasMore()?this.setCurrent(this._nextSlide(this._current)):!0===this.options.loop&&this.setCurrent(this._items.first())},i.prototype.nth=function(t){t>=0&&t<this._items.length&&this.setCurrent(this._items[t])},i.prototype._setCurrentSansTransition=function(i){for(var e=t(i),n=this._current,s=this._items.index(e.first()),r=s+(this._grouping-1),o=0;o<this._items.length;++o)o<s?t(this._items[o]).hide().removeClass("state-current"):o>=s&&o<=r?t(this._items[o]).show().addClass("state-current"):t(this._items[o]).hide().removeClass("state-current");this._current=e,this._element.trigger("change",[this._current,n]),this._updateControls()},i.prototype._setCurrent=function(i){var e,n,s=t(i),r=this._current,o=this._items.index(s.first()),h=this._items.index(r.first());-1!==o&&(o>=h?(n=-100*(this._items.length-this._grouping),e=this._translate-100*(o-h),this._translate=Math.max(n,e)):(e=this._translate+100*(h-o),this._translate=Math.min(0,e)),this._items.length<this._grouping&&(this._translate=0),this._items.css("transform","translateX("+this._translate.toString()+"%)"),r.removeClass("state-current"),this._current=s.addClass("state-current"),this._element.trigger("change",[this._current,r]),this._updateControls())},i.prototype.hasMore=function(){return this._items.index(this._current)+this._grouping<this._items.length},i.prototype.hasLess=function(){return this._items.index(this._current)>0},i.prototype._updateControls=function(){var i,e=this._element.find(".slide-prev"),n=this._element.find(".slide-next");this.options.pagination&&(this._element.find(".slide-controls .page.active").removeClass("active"),i=this._grouping>1?Math.floor((this._items.index(this._current)+1)/this._grouping):this._items.index(this._current),t(this._element.find(".slide-controls .page")[i]).addClass("active")),this.options.loop||(this.hasLess()?e.removeClass("state-inactive"):e.addClass("state-inactive"),this.hasMore()?n.removeClass("state-inactive"):n.addClass("state-inactive"))},i.prototype._drawPagination=function(){var i,e,n=this,s=this._items.length,r=this._element.find(".slide-controls .pagination"),o=function(i){var e=t(this).data("page");i.preventDefault(),n._grouping>1&&(e*=n._grouping),n.setCurrent(n._element.find(".slide-item")[e])};r.find(".page").remove(),this._grouping>1&&(s=Math.ceil(this._items.length/this._grouping));for(var h=0;h<s;h++)i=t('<li class="page" />'),(e=t('<a href="#" />')).data("page",h),e.on("click",o),i.append(e),r.append(i)},t.fn.slide=function(e){return e=e||{},this.each(function(){var n=t(this).data("slide");n||(n=new i(this,e),t(this).data("slide",n))})},i});