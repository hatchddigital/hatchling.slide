/*! slide - v0.2.15 - 2016-02-29
 * http://hatchd.com.au/
 * Copyright (c) 2016 Hatchd Digital <hello@hatchd.com.au>; 
 */!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):window.Slide=a(window.jQuery)}(function(a){"use strict";Date.now||function(){return(new Date).getTime()};a.fn.reverse=[].reverse;var b=function(b,c){return this.options=a.extend({loop:!1,onChange:null,onInit:null,grouping:1,breakpoints:null},c),this.onChange=this.options.onChange,this.onInit=this.options.onInit,this._element=a(b),this._items=this._element.find(".slide-item"),this._translate=0,this._current=a(this._items.filter(".state-current")),this._current.length&&this._current_length==this.options.grouping||(this._current=this._items.slice(0,this.options.grouping),this._current.addClass("state-current")),this.setCurrent=this.supportsTransform()?this._setCurrent:this._setCurrentSansTransition,null!==this.options.breakpoints?(this._bindBreakpoints(this.options.breakpoints.sort(function(a,b){return a.width>b.width})),this.setGrouping(1),a(window).trigger("resize")):this.setGrouping(this.options.grouping),this._bind(),this._draw(),this._element.trigger("init",this._current),this};return b.prototype._draw=function(){this._updateControls(),this._element.find(".slide-items").css("width",(100*(this._items.length/this._grouping)).toString()+"%"),this._items.css("width",(100/this._items.length).toString()+"%");var a=this._element.find(".slide-item").length;return this._element.find(".slide-items").attr("data-count",a),this},b.prototype._nextSlide=function(a){return this._grouping>0?a.first().nextAll().andSelf().slice(this._grouping,2*this._grouping):a.next()},b.prototype._prevSlide=function(a){return this._grouping>0?a.first().prevAll().slice(0,this._grouping).reverse():a.prev()},b.prototype._bindBreakpoints=function(b){var c=this;a(window).on("resize",function(){c.resizeWaitEvent&&window.clearTimeout(c.resizeWaitEvent),c.resizeWaitEvent=window.setTimeout(function(){for(var a,d=c._windowWidth(),e=b.length-1;e>=0;e--)if(a=b[e],a.width<d)return c.setGrouping(a.grouping),void c.setCurrent(c._current);c.setGrouping(c.options.grouping),c.setCurrent(c._current)},1e3)})},b.prototype._windowWidth=function(){if("undefined"==typeof window.orientation||null===window.orientation)return a(window).width();var b=a(window).width(),c=a(window).height();switch(window.orientation){case-90:case 90:return b>c?b:c;default:return c>b?b:c}},b.prototype.setGrouping=function(a){this._grouping=a,this._draw()},b.prototype.getGrouping=function(){return this._grouping},b.prototype.supportsTransform=function(){var a,b=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];for(a=0;a<b.length;a++)if(void 0!==document.createElement("div").style[b[a]])return!0;return!1},b.prototype._bind=function(){var b=this;return this._element.find(".slide-next").on("click",function(a){b.next(),a.preventDefault()}),this._element.find(".slide-prev").on("click",function(a){b.prev(),a.preventDefault()}),this._element.find(".slide-select").on("click",function(c){var d=a(this),e=b._element.find(d.attr("href"));b.setCurrent(e),c.preventDefault()}),this._element.on("change",function(a,c,d){"function"==typeof b.onChange&&b.onChange.call(this,a,c,d)}),this._element.on("init",function(a,c){"function"==typeof b.onInit&&b.onInit.call(this,a,c),b.first()}),this._element.find(".slide-bullets .slide-bullet").on("click",function(c){b.nth(a(this).index()),c.preventDefault()}),this._element.find(".slide-item").on("swipeleft",function(a){b.next(),a.preventDefault()}),this._element.find(".slide-item").on("swiperight",function(a){b.prev(),a.preventDefault()}),this._element.find(".slide-item").on("movestart",function(a){(a.distX>a.distY&&a.distX<-a.distY||a.distX<a.distY&&a.distX>-a.distY)&&a.preventDefault(),b._element.addClass("no-transition")}),this._element.find(".slide-item").on("move",function(c){var d=c.distX/a(this).width()*100;b._items.css("transform","translateX("+(b._translate+d)+"%)")}),this._element.find(".slide-item").on("moveend",function(a){b._element.removeClass("no-transition"),b._items.css("transform","translateX("+b._translate.toString()+"%)")}),this},b.prototype.prev=function(){this.hasLess()?this.setCurrent(this._prevSlide(this._current)):this.options.loop===!0&&this.setCurrent(this._items.last())},b.prototype.next=function(){this.hasMore()?this.setCurrent(this._nextSlide(this._current)):this.options.loop===!0&&this.setCurrent(this._items.first())},b.prototype.first=function(){this.setCurrent(this._items.first())},b.prototype.nth=function(a){a>=0&&a<this._items.length&&this.setCurrent(this._items[a])},b.prototype._setCurrentSansTransition=function(b){for(var c=a(b),d=this._current,e=this._items.index(c.first()),f=e+(this._grouping-1),g=0;g<this._items.length;++g)e>g?a(this._items[g]).hide().removeClass("state-current"):g>=e&&f>=g?a(this._items[g]).show().addClass("state-current"):a(this._items[g]).hide().removeClass("state-current");this._current=c,this._element.trigger("change",[this._current,d]),this._updateControls()},b.prototype._setCurrent=function(b){var c,d,e=a(b),f=this._current,g=this._items.index(e.first()),h=this._items.index(f.first());if(-1!==g){g>=h?(d=-100*(this._items.length-this._grouping),c=this._translate-100*(g-h),this._translate=Math.max(d,c)):(c=this._translate+100*(h-g),this._translate=Math.min(0,c)),this._items.css("transform","translateX("+this._translate.toString()+"%)"),f.removeClass("state-current"),this._current=e.addClass("state-current"),this._element.trigger("change",[this._current,f]);var i=a(this._current).find("img"),j=i.attr("data-src");if(j&&j!=i.attr("src")){var k=new window.Image;k.src=j,k.complete||k.width+k.height>0?i.attr("src",j):k.onload=function(){i.attr("src",j)}}this._updateControls()}},b.prototype.hasMore=function(){return this._items.index(this._current)+this._grouping<this._items.length},b.prototype.hasLess=function(){return this._items.index(this._current)>0},b.prototype._updateControls=function(){var a=this._element.find(".slide-prev"),b=this._element.find(".slide-next"),c=this._element.find(".slide-bullets .slide-bullet");c.length&&(c.removeClass("state--active"),c.eq(this._items.index(this._current)).addClass("state--active")),this.options.loop||(this.hasLess()?a.removeClass("state-inactive"):a.addClass("state-inactive"),this.hasMore()?b.removeClass("state-inactive"):b.addClass("state-inactive"))},a.fn.slide=function(c,d){return c=c||{},this.each(function(){var e=a(this).data("slide");e&&!d||(e=new b(this,c),a(this).data("slide",e))})},b});