/*! slide - v0.2.5 - 2017-05-19
 * http://hatchd.com.au/
 * Copyright (c) 2017 Hatchd Digital <hello@hatchd.com.au>; 
 */!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery-touchswipe"],a):window.Slide=a(window.jQuery)}(function(a){"use strict";Date.now;a.fn.reverse=[].reverse;var b=function(b,c){return this.options=a.extend({loop:!1,onChange:null,onInit:null,grouping:1,breakpoints:null,pagination:!1},c),this.onChange=this.options.onChange,this.onInit=this.options.onInit,this._element=a(b),this._items=this._element.find(".slide-item"),this._translate=0,this._current=a(this._items.filter(".state-current")),this._current.length&&this._current_length==this.options.grouping||(this._current=this._items.slice(0,this.options.grouping),this._current.addClass("state-current")),this.setCurrent=this.supportsTransform()?this._setCurrent:this._setCurrentSansTransition,null!==this.options.breakpoints?(this._bindBreakpoints(this.options.breakpoints.sort(function(a,b){return a.width>b.width})),a(window).trigger("resize")):(this.setGrouping(this.options.grouping),this.options.pagination&&this._drawPagination()),this._bind(),this._draw(),this._element.trigger("init",this._current),this};return b.prototype._draw=function(){return this._updateControls(),this._element.find(".slide-items").css("width",(this._items.length/this._grouping*100).toString()+"%"),this._items.css("width",(100/this._items.length).toString()+"%"),this},b.prototype._nextSlide=function(a){return this._grouping>0?a.first().nextAll().andSelf().slice(this._grouping,2*this._grouping):a.next()},b.prototype._prevSlide=function(a){return this._grouping>0?a.first().prevAll().slice(0,this._grouping).reverse():a.prev()},b.prototype._bindBreakpoints=function(b){var c=this;a(window).on("resize",function(){for(var d,e=void 0!==window.orientation&&180===Math.abs(window.orientation)?a(window).height():a(window).width(),f=b.length-1;f>=0;f--)if(d=b[f],d.width<e)return c.setGrouping(d.grouping),c.options.pagination&&c._drawPagination(),void c.setCurrent(c._current);c.setGrouping(c.options.grouping),c.options.pagination&&c._drawPagination(),c.setCurrent(c._current)})},b.prototype.setGrouping=function(a){this._grouping=a,this._draw()},b.prototype.getGrouping=function(){return this._grouping},b.prototype.supportsTransform=function(){var a,b=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];for(a=0;a<b.length;a++)if(void 0!==document.createElement("div").style[b[a]])return!0;return!1},b.prototype._bind=function(){var b=this;return this._element.find(".slide-next").on("click",function(a){b.next(),a.preventDefault()}),this._element.find(".slide-prev").on("click",function(a){b.prev(),a.preventDefault()}),this._element.find(".slide-select").on("click",function(c){var d=a(this),e=b._element.find(d.attr("href"));b.setCurrent(e),c.preventDefault()}),this._element.on("change",function(a,c,d){"function"==typeof b.onChange&&b.onChange.call(this,a,c,d)}),this._element.on("init",function(a,c){"function"==typeof b.onInit&&b.onInit.call(this,a,c)}),this._element.swipe({swipe:function(a,c,d,e,f,g){"left"===c&&b.next(),"right"===c&&b.prev()}}),this},b.prototype.prev=function(){this.hasLess()?this.setCurrent(this._prevSlide(this._current)):!0===this.options.loop&&this.setCurrent(this._items.last())},b.prototype.next=function(){this.hasMore()?this.setCurrent(this._nextSlide(this._current)):!0===this.options.loop&&this.setCurrent(this._items.first())},b.prototype.nth=function(a){a>=0&&a<this._items.length&&this.setCurrent(this._items[a])},b.prototype._setCurrentSansTransition=function(b){for(var c=a(b),d=this._current,e=this._items.index(c.first()),f=e+(this._grouping-1),g=0;g<this._items.length;++g)g<e?a(this._items[g]).hide().removeClass("state-current"):g>=e&&g<=f?a(this._items[g]).show().addClass("state-current"):a(this._items[g]).hide().removeClass("state-current");this._current=c,this._element.trigger("change",[this._current,d]),this._updateControls()},b.prototype._setCurrent=function(b){var c,d,e=a(b),f=this._current,g=this._items.index(e.first()),h=this._items.index(f.first());-1!==g&&(g>=h?(d=-100*(this._items.length-this._grouping),c=this._translate-100*(g-h),this._translate=Math.max(d,c)):(c=this._translate+100*(h-g),this._translate=Math.min(0,c)),this._items.length<this._grouping&&(this._translate=0),this._items.css("transform","translateX("+this._translate.toString()+"%)"),f.removeClass("state-current"),this._current=e.addClass("state-current"),this._element.trigger("change",[this._current,f]),this._updateControls())},b.prototype.hasMore=function(){return this._items.index(this._current)+this._grouping<this._items.length},b.prototype.hasLess=function(){return this._items.index(this._current)>0},b.prototype._updateControls=function(){var b,c=this._element.find(".slide-prev"),d=this._element.find(".slide-next");this.options.pagination&&(this._element.find(".slide-controls .page.active").removeClass("active"),b=this._grouping>1?Math.floor((this._items.index(this._current)+1)/this._grouping):this._items.index(this._current),a(this._element.find(".slide-controls .page")[b]).addClass("active")),this.options.loop||(this.hasLess()?c.removeClass("state-inactive"):c.addClass("state-inactive"),this.hasMore()?d.removeClass("state-inactive"):d.addClass("state-inactive"))},b.prototype._drawPagination=function(){var b,c,d=this,e=this._items.length,f=this._element.find(".slide-controls .pagination"),g=function(b){var c=a(this).data("page");b.preventDefault(),d._grouping>1&&(c*=d._grouping),d.setCurrent(d._element.find(".slide-item")[c])};f.find(".page").remove(),this._grouping>1&&(e=Math.ceil(this._items.length/this._grouping));for(var h=0;h<e;h++)b=a('<li class="page" />'),c=a('<a href="#" />'),c.data("page",h),c.on("click",g),b.append(c),f.append(b)},a.fn.slide=function(c){return c=c||{},this.each(function(){var d=a(this).data("slide");d||(d=new b(this,c),a(this).data("slide",d))})},b});